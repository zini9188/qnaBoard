# Q & A 게시판 만들기 기능 요구 사항

## ERD 다이어그램

![erd.PNG](erd.PNG)

## 공통 요구 사항

- Q&A 게시판은 회원 전용 게시판으로, 등록된 회원만 사용할 수 있다.
    - ~~Spring Security를 적용하지 않으므로 별도의 회원 로그인 인증 과정은 없는 것으로 간주한다.~~ -> Spring Security JWT 적용
    - admin@gmail.com은 관리자의 역할을 하며, 애플리케이션에 상수 형태로 사용한다.

## 질문 ❓

#### 질문 등록

- 회원만 등록할 수 있다.
- 등록 날짜가 생성되어야 한다.
- 상태 값이 필요하다. (초기 값은 QUESTION_REGISTRATION)

| 상태                    | 특징       |
|-----------------------|----------|
| QUESTION_REGISTRATION | 질문 등록 상태 |
| QUESTION_ANSWERED     | 답변 완료 상태 |
| QUESTION_DELETE       | 질문 삭제 상태 |

- 질문 제목과 내용은 필수입력 사항이다. (not null)
- 질문의 접근 상태를 설정할 수 있다.

| 상태              | 특징  |
|-----------------|-----|
| QUESTION_PUBLIC | 공개  |
| QUESTION_SECRET | 비공개 |

#### 질문 수정

- 질문을 등록한 회원만 수정할 수 있다.
- 질문의 접근 상태를 변경할 수 있다.
- 답변 완료된 질문은 수정할 수 없다.

#### 1건의 질문 조회

- 질문은 회원, 관리자, 게스트 모두 조회할 수 있다.
- 비밀글 상태인 질문은 등록한 회원과 관리자만 조회할 수 있다.
- 질문을 조회하는 경우 해당 질문에 대한 답변도 함께 조회되어야 한다.
- 삭제 상태의 질문은 조회할 수 없다.
- 비활성화 상태인 회원의 질문은 조회할 수 없다.

#### 여러건의 질문 조회

- 여러 건의 질문 목록은 회원, 관리자, 게스트 모두 조회할 수 있다.
- 비활성화 상태인 회원의 질문은 조회할 수 없다.
- 삭제 상태의 질문은 조회할 수 없다.
- 여러 건의 질문 목록에 각각의 질문에 답변이 존재하면 답변도 함께 조회할 수 있다.
- 여러 건의 질문 목록은 페이지네이션 처리가 되어 일정 건수만큼만 조회할 수 있다.
- 여러 건의 질문 목록은 아래의 조건으로 정렬해서 조회할 수 있어야 한다.

| 번호  |    이름     |    조건     | 정렬 순서 |   기준 컬럼    |
|:---:|:---------:|:---------:|:-----:|:----------:|
|  0  |  NEWEST   |   최신글 순   | DESC  | created_at |
|  1  |  OLDEST   |  오래된 글 순  |  ASC  | created_at |
|  2  | MOST_LIKE | 좋아요 많은 순  | DESC  |   likes    |
|  3  | LESS_LIKE | 좋아요 적은 순  |  ACS  |   likes    |
|  4  | MOST_VIEW | 조회수가 많은 순 | DESC  |   views    |
|  5  | LESS_VIEW | 조회수가 적은 순 |  ACS  |   views    |

#### 질문 삭제

- 질문은 등록한 회원만 삭제할 수 있다.
- 질문 삭제시 질문 상태만(QUESTION_DELETE) 변경되고 테이블에서는 삭제되지 않는다.
- 이미 삭제 상태인 질문은 삭제할 수 없다.

## 답변 ✔

#### 질문에 대한 답변 등록

- 답변은 관리자만 등록할 수 있다.
- 답변 등록 날짜가 생성되어야 한다.
- 답변이 등록되면, 질문의 상태값은 QUESTION_ANSWERED로 변경되어야 한다.
- 내용은 필수 입력 사항이다.
- 질문과 같은 접근 상태를 가진다.

#### 답변 수정

- 등록된 답변의 내용은 관리자만 수정할 수 있다.

#### 답변 삭제

- 관리자만 삭제할 수 있다.
- 답변 삭제 시, 테이블에서 삭제된다.

## 회원 👥

| 속성    | 비고                                                                  |
|-------|---------------------------------------------------------------------|
| 이메일   | 고유한 값으로 현재는 변경이 불가능, 추후 인증을 통한 변경 가능성 여부 열려 있음                      |
| 닉네임   | 질문을 등록할 때 사용할 닉네임으로 변경이 가능. 현재는 중복이 허용되지만 닉네임 인증 기능을 통한 중복 방지 구현 필요 |
| 성명    | 사용자에 실제 이름으로, 중복 및 변경 가능                                            |
| 비밀번호  | 변경 가능, 중복되는 비밀번호 사용 가능, 추후 인증 시스템을 통한 비밀번호 암호화 필요                   |
| 계정 상태 | 활성화 상태, 비활성화 상태로 구분                                                 |
| 생성일   | 생성 날짜                                                               |
| 수정일   | 수정 날짜                                                               |

#### 회원 등록

- 이메일, 닉네임, 성명, 비밀번호를 설정하여 회원 가입을 진행

#### 회원 정보 수정

- 회원 자신의 정보만을 수정할 수 있다.
- 회원은 회원 정보 수정을 통해 자신의 닉네임, 성명, 비밀번호를 변경 가능
- TODO: 이메일 인증을 통한 새로운 이메일로의 변경

#### 회원 탈퇴

- 회원의 상태가 비활성화로 변경
- TODO: 회원이 비활성화가 되고 N개월 이후 자동으로 삭제

#### 자신의 회원 정보 조회

- 회원은 자신의 회원 정보를 볼 수 있다.

#### 다른 사람의 회원 정보 조회

- 회원은 다른 사람의 회원 정보를 조회할 수 있다.


## 좋아요 👍

|  상태  | 특징             |
|:----:|:---------------|
| Like | 좋아요를 누른 상태     |
| NONE | 좋아요를 누르지 않은 상태 |

#### 좋아요 등록

- 한 회원은 한 질문에 하나의 좋아요를 할 수 있다.

#### 좋아요 수정

- 한 회원은 자신이 좋아요한 질문의 좋아요를 취소할 수 있다.

## 조회수 👀

#### 조회수 증가

- 조회수는 회원이나 관리자가 확인하는 경우 증가한다.
